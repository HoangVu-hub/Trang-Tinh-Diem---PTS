<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=210mm, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Đơn xin miễn giảm học phí cho tân sinh viên Đại học Cửu Long năm 2025">
    <meta name="keywords" content="miễn giảm học phí, Đại học Cửu Long, tân sinh viên 2025">
    <meta name="author" content="Đại học Cửu Long">
    <title>Đơn Xin Nhận Tiền Miễn Giảm Học Phí - Đại học Cửu Long</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Times New Roman', Times, serif;
            color: #000000;
            margin: 0;
            background-color: #f3f4f6; /* bg-gray-100 */
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }
        .form-container {
            width: 210mm;
            min-height: 297mm;
            margin: 0 auto;
            padding: 15mm;
            box-sizing: border-box;
            background-color: #ffffff; /* bg-white */
        }
        .title-main {
            font-size: 12pt;
            font-weight: bold;
            text-align: center;
        }
        .title-sub {
            font-size: 13pt;
            font-weight: bold;
            text-align: center;
        }
        .form-title {
            font-size: 14pt;
            font-weight: bold;
            text-align: center;
        }
        .recipient .kinh-gui {
            text-align: left;
            font-size: 14pt;
        }
        .recipient .flex {
            display: flex;
            justify-content: flex-start;
        }
        .recipient .inline-block {
            text-align: left;
        }
        .recipient .inline-block p {
            position: relative;
            padding-left: 1rem;
            font-size: 14pt;
        }
        .recipient .inline-block p::before {
            content: '-';
            position: absolute;
            left: 0;
            font-weight: bold;
        }
        .personal-info p {
            font-size: 13pt;
        }
        .policy-section > p {
            font-size: 13pt;
            font-weight: bold;
        }
        .policy-section ul {
            list-style-position: outside;
            padding-left: 1.5rem;
        }
        .policy-section li {
            font-size: 13pt;
        }
        .attachment-section > p {
            font-size: 13pt;
            font-weight: bold;
        }
        .attachment-section ul {
            list-style-position: outside;
            padding-left: 1.5rem;
            overflow-x: hidden;
        }
        .attachment-section li {
            font-size: 13pt;
        }
        .closing-text.policy p {
            font-size: 11pt;
        }
        .closing-text.attachment p {
            font-size: 13pt;
        }
        .signature-section p {
            font-size: 13pt;
        }
        .signature-section .bold {
            font-weight: bold;
        }
        .signature-section .italic {
            font-style: italic;
        }
        .italic {
            font-style: italic;
        }
        .shape {
            border-bottom: 1px solid #000000;
            display: inline-block;
        }
        .policy-section input,
        .attachment-section input {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            width: 16px;
            height: 16px;
            border: 2px solid #000;
            border-radius: 4px;
            position: relative;
            vertical-align: middle;
            margin-right: 8px;
        }
        .policy-section input:checked,
        .attachment-section input:checked {
            border-color: #000000 !important;
            background-color: #ffffff;
        }
        .policy-section input:checked::before,
        .attachment-section input:checked::before {
            content: '✔';
            font-size: 12px;
            font-weight: bold;
            color: #000000;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        @media (max-width: 640px) {
            .form-container {
                padding: 10mm;
                width: 100%;
                max-width: 210mm;
            }
            .recipient p,
            .personal-info p,
            .policy-section p,
            .policy-section li,
            .attachment-section p,
            .attachment-section li,
            .closing-text p,
            .signature-section p,
            .no-print button,
            #errorMessage {
                font-size: 14pt;
            }
            .no-print {
                flex-direction: column;
                align-items: center;
            }
            .no-print p {
                font-size: 14px;
            }
            .no-print button {
                width: 100%;
                max-width: 300px;
            }
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
                width: 210mm;
                min-height: 297mm;
                background-color: #ffffff !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
                transform: none !important;
                zoom: 100% !important;
            }
            .form-container {
                margin: 0;
                padding: 15mm;
                border: none;
                box-shadow: none;
                width: 210mm;
                min-height: 297mm;
                box-sizing: border-box;
                page-break-inside: avoid;
                background-color: #ffffff !important;
            }
            .no-print, .no-print * {
                display: none !important;
                visibility: hidden !important;
            }
            .recipient .kinh-gui {
                text-align: left !important;
                margin-left: 223.316pt !important;
            }
            .recipient .flex {
                justify-content: flex-start !important;
                margin-left: 295.113pt !important;
            }
            .title-main {
                font-size: 12pt !important;
                font-weight: bold !important;
            }
            .title-sub {
                font-size: 13pt !important;
                font-weight: bold !important;
            }
            .form-title {
                font-size: 14pt !important;
                font-weight: bold !important;
            }
            .recipient p {
                font-size: 14pt !important;
            }
            .personal-info p {
                font-size: 13pt !important;
            }
            .policy-section > p {
                font-size: 13pt !important;
                font-weight: bold !important;
            }
            .policy-section li {
                font-size: 13pt !important;
            }
            .attachment-section > p {
                font-size: 13pt !important;
                font-weight: bold !important;
            }
            .attachment-section li {
                font-size: 13pt !important;
            }
            .closing-text.policy p {
                font-size: 11pt !important;
            }
            .closing-text.attachment p {
                font-size: 13pt !important;
            }
            .signature-section p {
                font-size: 13pt !important;
            }
            .policy-section input,
            .attachment-section input {
                width: 14pt !important;
                height: 14pt !important;
                border: 2px solid #000000 !important;
                border-radius: 4px !important;
                position: relative;
            }
            .policy-section input:checked,
            .attachment-section input:checked {
                border-color: #000000 !important;
                background-color: #ffffff !important;
            }
            .policy-section input:checked::before,
            .attachment-section input:checked::before {
                content: '✔';
                font-size: 12pt !important;
                font-weight: bold;
                color: #000000;
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }
            @page {
                size: A4;
                margin: 0;
            }
            html, body {
                -webkit-transform: none !important;
                transform: none !important;
                zoom: 100% !important;
            }
        }
    </style>
</head>
<body>
    <div class="form-container">
        <h1 class="title-main mb-2">CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM</h1>
        <p class="title-sub mb-6"><span class="shape">Độc lập - Tự do - Hạnh phúc</span></p>
        <h2 class="form-title mt-4 mb-2">ĐƠN XIN NHẬN TIỀN MIỄN GIẢM HỌC PHÍ</h2>
        <p class="form-title" id="subtitle">Dành cho tân sinh viên <span class="shape">hệ Đại học chính</span> quy năm 2025, khóa 26</p>
        <div class="recipient mt-4">
            <p id="kinhGui" class="kinh-gui" style="margin-left: 223.316pt;"><strong>Kính gửi:</strong></p>
            <div class="flex" style="margin-left: 295.113pt;">
                <div class="inline-block space-y-1">
                    <p>Ban Giám hiệu Trường Đại học Cửu Long;</p>
                    <p>Trung tâm Tuyển sinh – Truyền thông;</p>
                    <p>Phòng Kế hoạch – Tài chính.</p>
                </div>
            </div>
        </div>
        <div class="personal-info mt-4 space-y-1">
            <div class="flex flex-col sm:flex-row justify-between gap-2">
                <p>Tôi tên: <strong id="fullName">Nguyễn Hoàng Vũ</strong></p>
                <p>Điện thoại liên lạc: <strong id="phone">0384533420</strong></p>
            </div>
            <div class="flex flex-col sm:flex-row justify-between gap-2">
                <p>Ngày sinh: <strong id="dob">20/01/2003</strong></p>
                <p>Nơi sinh: <strong id="birthPlace">Vĩnh Long</strong></p>
            </div>
            <p>Địa chỉ liên lạc: <strong id="address">337/27 Thanh Yên, Vĩnh Thành, Vĩnh Long</strong></p>
            <p>Là sinh viên khóa 26, ngành: <strong id="major">Công nghệ thông tin</strong></p>
        </div>
        <div class="policy-section mt-4">
            <p class="font-medium">Tôi thuộc diện miễn giảm học phí:</p>
            <ul id="policyList" class="list-decimal pl-6 mt-2 space-y-1">
                <li data-policy="1"><input type="checkbox" id="policy1" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300" disabled> Giảm 50% học phí năm thứ nhất cho tân sinh viên hộ nghèo, cận nghèo <span class="italic">(không áp dụng cho ngành Y khoa, Y học cổ truyền, Răng Hàm Mặt)</span>.</li>
                <li data-policy="2"><input type="checkbox" id="policy2" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300" disabled> Giảm 50% học phí năm thứ nhất cho tân sinh viên mồ côi cha, mồ côi mẹ hoặc mồ côi cả cha và mẹ <span class="italic">(không áp dụng cho ngành Y khoa, Y học cổ truyền, Răng Hàm Mặt)</span>.</li>
                <li data-policy="3"><input type="checkbox" id="policy3" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300" disabled> Giảm 40% học phí HK1 năm thứ nhất cho tân sinh viên là con của người có công với cách mạng, có anh/chị đang là sinh viên ĐHCL, người dân tộc thiểu số, con ruột của CB, GV trường THPT, TTGDTX, Sở GD&ĐT các tỉnh, hoặc con, em, cháu ruột của CB, GV ĐHCL <span class="italic">(không áp dụng cho ngành Y khoa, Y học cổ truyền, Răng Hàm Mặt)</span>.</li>
                <li data-policy="4"><input type="checkbox" id="policy4" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300" disabled> Giảm 20% học phí HK1 năm thứ nhất cho học sinh THPT, TTGDTX ở Vĩnh Long. Riêng học sinh THCS và THPT Phú Quới giảm 40% HK1 <span class="italic">(không áp dụng cho ngành Y khoa, Y học cổ truyền, Răng Hàm Mặt)</span>.</li>
                <li data-policy="5"><input type="checkbox" id="policy5" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300" disabled> Giảm 20% học phí trọn khóa cho ngành Công tác xã hội, Kỹ thuật xây dựng công trình giao thông, Kỹ thuật y sinh, Kinh doanh thương mại, Hộ sinh, Kỹ thuật hình ảnh y học.</li>
                <li data-policy="6"><input type="checkbox" id="policy6" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300" disabled> Miễn học phí HK1 năm nhất nếu điểm TBM lớp 12 từ 9.0 trở lên, riêng ngành Dược học giảm 50% HK1 <span class="italic">(không áp dụng cho ngành Y khoa, Y học cổ truyền, Răng Hàm Mặt)</span>.</li>
                <li data-policy="7"><input type="checkbox" id="policy7" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300" disabled> Giảm 50% học phí HK1 năm nhất nếu điểm TBM lớp 12 từ 8.5–dưới 9.0, riêng Dược học giảm 25% HK1 <span class="italic">(không áp dụng cho ngành Y khoa, Y học cổ truyền, Răng Hàm Mặt)</span>.</li>
                <li data-policy="8"><input type="checkbox" id="policy8" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300" disabled> Giảm 25% học phí HK1 nếu điểm TBM lớp 12 từ 8.0–dưới 8.5 <span class="italic">(không áp dụng cho ngành Dược học, Y khoa, Y học cổ truyền, Răng Hàm Mặt)</span>.</li>
                <li data-policy="9"><input type="checkbox" id="policy9" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300" disabled> Miễn học phí toàn khóa cho sinh viên dân tộc Khmer theo giới thiệu của Ban Dân tộc các tỉnh: An Giang, Bạc Liêu, Hậu Giang, Kiên Giang, Sóc Trăng, Trà Vinh, Vĩnh Long <span class="italic">(không áp dụng cho ngành Y khoa, Y học cổ truyền, Răng Hàm Mặt)</span>.</li>
                <li data-policy="10"><input type="checkbox" id="policy10" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300" disabled> Giảm 50% học phí HK1 năm thứ nhất cho con thương binh, con liệt sĩ.</li>
            </ul>
            <div class="closing-text policy mt-4">
                <p>Nay tôi làm Đơn này kính đề nghị Nhà trường xem xét cho tôi được nhận tiền miễn giảm học phí dành cho tân sinh viên năm 2025, khóa 26, theo chế độ chính sách của Trường.</p>
            </div>
        </div>
        <div class="attachment-section mt-4">
            <p class="font-medium">Hồ sơ đính kèm <span class="italic">(đánh dấu X vào các minh chứng cho đối tượng miễn giảm học phí)</span>:</p>
            <ul class="list-decimal pl-5 mt-2 space-y-1">
                <li><input type="checkbox" id="attach1" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"> Bản sao Giấy khai sinh của tân sinh viên.</li>
                <li><input type="checkbox" id="attach2" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"> Bản sao Giấy khai sinh của anh/chị/em ruột sinh viên.</li>
                <li><input type="checkbox" id="attach3" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"> Giấy CMND/CCCD photo công chứng.</li>
                <li><input type="checkbox" id="attach4" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"> Học bạ THPT photo công chứng.</li>
                <li><input type="checkbox" id="attach5" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"> Hộ khẩu photo công chứng.</li>
                <li><input type="checkbox" id="attach6" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"> Thẻ sinh viên của anh/chị/em tân sinh viên.</li>
                <li><input type="checkbox" id="attach7" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"> Sổ Hộ nghèo photo công chứng / Sổ Hộ Cận nghèo photo công chứng.</li>
                <li><input type="checkbox" id="attach8" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"> Các giấy tờ chứng minh cha hoặc mẹ của sinh viên là người có công với cách mạng.</li>
                <li><input type="checkbox" id="attach9" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"> Các giấy tờ chứng minh cha hoặc mẹ của sinh viên đã qua đời.</li>
                <li><input type="checkbox" id="attach10" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"> Giấy xác nhận của cán bộ, giáo viên Trường Đại học Cửu Long.</li>
                <li><input type="checkbox" id="attach11" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"> Giấy xác nhận của Trường THPT, TTGDTX.</li>
                <li><input type="checkbox" id="attach12" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"> Giấy báo nhập học.</li>
                <li><input type="checkbox" id="attach13" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"> Biên lai thu tiền học phí.</li>
                <li><input type="checkbox" id="attach14" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"> Quyết định/Công văn giới thiệu của Ban Dân tộc tỉnh.</li>
            </ul>
            <div class="closing-text attachment mt-4">
                <p>Rất mong sự xem xét chấp thuận của quý Thầy/Cô.</p>
                <p>Trân trọng./.</p>
            </div>
        </div>
        <div class="signature-section mt-6 flex justify-between">
            <div class="w-1/2 text-center">
                <p class="bold">Ý KIẾN TRUNG TÂM TUYỂN SINH</p>
                <p class="mt-2" id="selectedPolicy">Giảm 40% học phí HK1 năm thứ nhất cho học sinh THCS và THPT Phú Quới.</p>
                <div class="h-20"></div>
            </div>
            <div class="w-1/2 text-center">
                <p class="italic">Vĩnh Long, ngày <span id="currentDate">20/08/2025</span></p>
                <p class="bold">NGƯỜI LÀM ĐƠN</p>
                <div class="h-20"></div>
            </div>
        </div>
    </div>
    <div class="no-print mt-4 flex flex-col sm:flex-row gap-3 justify-center w-full max-w-3xl mx-auto">
        <button onclick="previewPrint()" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold">Xem Trước Khi In</button>
        <button onclick="window.print()" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold">In Đơn</button>
        <button onclick="window.location.href='index.html'" class="px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors font-semibold">Quay Lại Trang Tính Điểm</button>
        <div class="mt-4 text-center text-sm text-gray-600">
            <p><strong>Hướng dẫn in:</strong> Chọn khổ giấy A4, tỷ lệ 100%, và đặt lề thành "Không" hoặc "0" trong cài đặt máy in để đảm bảo căn chỉnh chính xác.</p>
        </div>
    </div>
    <p class="no-print mt-4 text-red-600 text-center font-semibold" id="errorMessage" style="display: none;">Lỗi: Không tìm thấy dữ liệu. Vui lòng quay lại trang tính điểm!</p>

    <script>
        window.onload = function() {
            const data = JSON.parse(localStorage.getItem('applicationData') || '{}');
            const formContainer = document.querySelector('.form-container');
            const errorMessage = document.getElementById('errorMessage');

            if (!data.fullName || !data.major || !data.selectedPolicyId) {
                formContainer.style.display = 'none';
                errorMessage.style.display = 'block';
                return;
            }

            document.getElementById('fullName').innerText = data.fullName || 'Chưa nhập';
            document.getElementById('dob').innerText = data.dob ? formatDate(data.dob) : 'Chưa nhập';
            document.getElementById('birthPlace').innerText = data.birthPlace || 'Chưa nhập';
            document.getElementById('address').innerText = data.address || 'Chưa nhập';
            document.getElementById('phone').innerText = data.phone || 'Chưa nhập';
            document.getElementById('major').innerText = data.major || 'Chưa nhập';
            document.getElementById('currentDate').innerText = formatDate(new Date());

            if (data.averageScore && data.selectedPolicyId === 'byScore') {
                const policyList = document.getElementById('policyList');
                const tbmLi = document.createElement('li');
                tbmLi.innerHTML = `<input type="checkbox" id="policyTBM" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300" disabled checked> Điểm TBM lớp 12: ${data.averageScore.toFixed(2)}`;
                policyList.appendChild(tbmLi);
            }

            const policyMessages = {
                '1': `Giảm 50% học phí năm thứ nhất cho tân sinh viên ${data.discountType === 'poor' ? 'hộ nghèo' : 'cận nghèo'}.`,
                '2': `Giảm 50% học phí năm thứ nhất cho tân sinh viên mồ côi ${data.discountType === 'father' ? 'cha' : data.discountType === 'mother' ? 'mẹ' : 'cha và mẹ'}.`,
                '3': `Giảm 40% học phí HK1 năm thứ nhất cho tân sinh viên là ${{
                    revolutionary: 'con của người có công với cách mạng',
                    sibling: 'có anh/chị đang là sinh viên ĐHCL',
                    minority: 'người dân tộc thiểu số',
                    teacherChild: 'con ruột của CB, GV trường THPT, TTGDTX, Sở GD&ĐT các tỉnh',
                    mkuRelative: 'con, em, cháu ruột của CB, GV ĐHCL'
                }[data.discountType]}.`,
                '4': `Giảm ${data.discountType} học phí HK1 năm thứ nhất cho học sinh ${data.discountType === '20%' ? 'THPT, TTGDTX ở Vĩnh Long' : 'THCS và THPT Phú Quới'}.`,
                '5': `Giảm 20% học phí trọn khóa cho ngành ${data.discountType}.`,
                '6': `Miễn học phí HK1 năm nhất nếu điểm TBM lớp 12 từ 9.0 trở lên${data.major && data.major.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '').includes('duoc hoc') ? ' (giảm 50% HK1 cho ngành Dược học)' : ''} (điểm TBM: ${data.averageScore ? data.averageScore.toFixed(2) : 'Chưa có'}).`,
                '7': `Giảm 50% học phí HK1 năm nhất nếu điểm TBM lớp 12 từ 8.5–dưới 9.0${data.major && data.major.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '').includes('duoc hoc') ? ' (giảm 25% HK1 cho ngành Dược học)' : ''} (điểm TBM: ${data.averageScore ? data.averageScore.toFixed(2) : 'Chưa có'}).`,
                '8': `Giảm 25% học phí HK1 nếu điểm TBM lớp 12 từ 8.0–dưới 8.5 (điểm TBM: ${data.averageScore ? data.averageScore.toFixed(2) : 'Chưa có'}).`,
                '9': `Miễn học phí toàn khóa cho sinh viên dân tộc Khmer theo giới thiệu của Ban Dân tộc tỉnh ${data.discountType}.`,
                '10': `Giảm 50% học phí HK1 năm thứ nhất cho ${data.discountType === 'wounded' ? 'con thương binh' : 'con liệt sĩ'}.`
            };

            const selectedPolicyId = data.selectedPolicyId;
            if (selectedPolicyId) {
                document.getElementById('selectedPolicy').innerText = policyMessages[selectedPolicyId] || data.discountMessage || 'Chưa chọn';
                if (selectedPolicyId !== 'byScore') {
                    const policyCheckbox = document.getElementById(`policy${selectedPolicyId}`);
                    if (policyCheckbox) {
                        policyCheckbox.checked = true;
                        policyCheckbox.parentElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }
                }
            } else {
                document.getElementById('selectedPolicy').innerText = data.discountMessage || 'Chưa chọn';
            }
        };

        function formatDate(dateString) {
            if (!dateString) return 'Chưa nhập';
            const date = typeof dateString === 'string' ? new Date(dateString) : dateString;
            if (isNaN(date)) return 'Chưa nhập';
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const year = date.getFullYear();
            return `${day}/${month}/${year}`;
        }

        function previewPrint() {
            alert('Vui lòng kiểm tra xem trước in, chọn khổ giấy A4, tỷ lệ 100%, và đặt lề thành "Không" hoặc "0" để đảm bảo căn chỉnh chính xác.');
            window.print();
        }
    </script>
</body>
</html>
